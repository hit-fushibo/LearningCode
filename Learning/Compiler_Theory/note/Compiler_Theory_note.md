# 24春编译原理笔记

## 第一章 绪论

### 1.1 什么是编译

* 高级语言

  * 接近人类表达习惯
  * 不依赖于特定机器
  * 编写效率高
* 汇编语言

  * 依赖于特定机器
  * 编写效率依然很低
* 机器语言

  * 与人类表达习惯相差很大
  * 难记忆
  * 难编写、阅读
  * 易写错

![1709699421936](images/1709699421936.png)

**编译**：将高级语言翻译成汇编语言或者机器语言的过程

### 1.2 编译系统的结构

编译器的结构

* 分析部分：与源语言有关
  * 词法分析器
    * 字符流->词法单元流
  * 语法分析器
    * 词法单元流->语法树
  * 语义分析器
    * 语法树->语法树
  * 中间代码生成器
    * 语法树->中间表示形式
* 机器无关代码优化器
  * 中间表示形式->中间表示形式
* 综合部分：与目标语言有关
  * 目标代码生成器
    * 中间表示形式->目标机器语言
  * 机器相关代码优化器
    * 目标机器语言->目标机器语言

词法分析

* 主要任务：从左向右逐行扫描源程序的字符，识别出各个单词，确定单词的类型。将识别出的单词转换成统一的机内表示——词法单元(token：<种别码，属性值>)形式
* token
  * 关键字：一词一码
  * 标识符：多词一码
  * 常量：一型一码
  * 运算符：一词一码或一型一码
  * 界限符：一词一码

语法分析

* 主要任务：从词法分析器输出的token序列中识别出各类短语，并构造语法分析树

  ![1709700126964](images/1709700126964.png)

语义分析

* 主要任务
  * 收集标识符的属性信息：种属、类型、存储位置和长度、值、作用域、参数和返回值信息（参数个数、类型、传递方式、返回值类型）。收集的信息存储在符号表中
  * 语义检查

    ![1709700300118](images/1709700300118.png)

常用的中间表示形式

* 三地址码：由类似于汇编语言的指令序列组成，每个指令最多有三个操作数
  * 三地址指令的表示形式
    * 四元式：(op,arg1,arg2,result)
    * 三元式：(op.arg1,arg2)
    * 间接三元式
  * 地址形式
    * 源程序中的名字
    * 常量
    * 编译器生成的临时变量
  * 三地址指令序列唯一确定了运算完成的顺序
* 语法结构树、语法树

目标代码生成

* 以源程序的中间表示形式作为输入，并把它映射到目标语言
* 一个重要任务：为程序中使用的变量合理分配寄存器

代码优化

* 为改进代码所进行的等价程序变换，使其运行得更快一些、占用空间更少一些，或者二者兼顾

### 1.3 编译程序的生成

**机器语言编写**：

* 更好的发挥硬件系统的效率
* 可读性、可靠性、可维护性、编制效率差

**自展技术**：用高级语言编写

* T形图
  ![1709700850403](images/1709700850403.png)
* 运用自展技术在同一台机器上实现不同语言的编译器
  ![1709700903941](images/1709700903941.png)

**编译器的移植**：有时也称为交叉编译，是指将一台机器上运行的编译器进行处理，构造出在另一台机器上可以运行的编译器

![1709700959671](images/1709700959671.png)

**编译器自动生成**：

* LEX：词法分析程序生成器
* YACC：语法分析程序生成器
